name: PR Update
run-name: pr @ ${{ github.sha }}

on:
  pull_request:
    types: [opened]

jobs:
  build:
    name: PR Update
    runs-on: ubuntu-22.04
    steps:

    # - name: Checkout
    #   uses: actions/checkout@v5

    # - name: Assign labels
    #   uses: actions/labeler@v6

    - name: Assign milestone
      uses: actions/github-script@v7
      with:
        script: |
          const milestones = await github.rest.issues.listMilestones({
            owner: context.repo.owner,
            repo: context.repo.repo,
            state: "open",
            sort: "due_on",
            direction: "asc"
          })
          await github.rest.issues.update({
            owner: context.repo.owner,
            repo: context.repo.repo,
            issue_number: context.issue.number,
            milestone: milestones.data[0].number
          });
      # if: github.event.action == 'opened'
    
